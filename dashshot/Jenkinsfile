pipeline {
  agent {
    label 'vetsgov-general-purpose'
  }

  stages {
    stage('Create PDF') {
      steps {
        script {
          dockerImage = docker.build('dashshot', 'dashshot')
          args = "-v ${pwd()}:/pdf"
          dockerImage.inside(args) {
            sh 'node /app/index.js'
          }
        }
      }
    }

    stage('Check results') {
      steps {
        sh 'ls -al'
      }
    }
  }

  post {
    always {
      deleteDir()
    }
  }
}
